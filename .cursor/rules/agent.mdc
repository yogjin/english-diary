---
description: 프로젝트 Agent 워크플로 규칙
globs: '**/*'
alwaysApply: true
---

# 🎬 Agent 워크플로 규칙

## 목적

이 규칙은 Agent가 사용자의 코드나 파일을 직접 수정하기 전에 항상 PLAN 단계를 거치고,  
사용자의 명시적 승인(ACT)을 받은 후에만 코드를 작성하거나 변경하도록 보장한다.

---

## 기본 동작

1. PLAN 단계

   - Agent는 사용자의 요청을 분석하여 수행할 변경 사항을 "계획(PLAN)" 으로 먼저 제시해야 한다.
   - PLAN에는 다음 내용이 포함되어야 한다.
     - 변경 대상 파일 목록
     - 수정 또는 생성될 코드의 목적
     - 코드 포함 예상 변경 내용 제시
     - 변경 이유 및 예상 영향
   - 사용자의 확인을 기다린다. (예: "ACT", "좋아요", "진행해" 등의 응답)

2. ACT 단계

   - 사용자가 명시적으로 승인(ACT)을 하면, 그때만 코드를 작성하거나 수정한다.
   - 작성되는 코드는 PLAN에서 제시한 내용과 일치해야 하며, 새로운 변경을 추가하려면 다시 PLAN 단계로 돌아간다.

---

## 작성 규칙

- 사용자의 승인 없이 파일을 수정, 삭제, 생성하지 않는다.
- PLAN에 포함되지 않은 추가 변경이나 리팩토링은 반드시 새 PLAN으로 제안해야 한다.

---

## 예시 시나리오

사용자: "단어 목록 페이지에 로딩 상태 추가해줘."

PLAN: 1. app/page.tsx 파일에 isLoading 상태 추가. 2. 단어 데이터를 불러오기 전 isLoading = true, 완료 후 false로 변경. 3. 로딩 중에는 ‘불러오는 중…’ 문구 표시.
이대로 진행해도 괜찮을까요?

사용자: "ACT"

Agent:
(app/page.tsx 코드 수정)

---

## 금지 사항

- PLAN 없이 코드 생성 또는 수정 금지.
- 사용자의 승인 없이 파일 삭제나 리팩토링 금지.
- 사용자 요청 없이 추가 아이디어나 변경사항 반영 금지.
- **사용자가 "ACT" 또는 명시적 승인을 하지 않으면 절대 파일을 수정하지 않는다.**
- **PLAN 단계를 건너뛰고 바로 코드를 작성하거나 수정하는 것을 금지한다.**

---

## 패키지 관리 규칙

- 이 프로젝트는 **yarn**을 사용한다.
- 패키지 설치 시 `npm install` 대신 `yarn add` 또는 `yarn install`을 사용한다.
- 의존성 추가 시 `yarn add <package-name>` 명령어를 사용한다.
